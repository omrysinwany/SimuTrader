{"version":3,"file":"tradingview-widget.mjs","sources":["../../../projects/tradingview-widget/src/lib/tradingview-widget.service.ts","../../../projects/tradingview-widget/src/lib/tradingview-widget.model.ts","../../../projects/tradingview-widget/src/lib/tradingview-widget.component.ts","../../../projects/tradingview-widget/src/lib/tradingview-widget.module.ts","../../../projects/tradingview-widget/src/public-api.ts","../../../projects/tradingview-widget/src/tradingview-widget.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TradingviewWidgetService {\n\n  constructor() { }\n}\n","export enum BarStyles {\n    BARS= '0',\n    CANDLES= '1',\n    HOLLOW_CANDLES= '9',\n    HEIKIN_ASHI= '8',\n    LINE= '2',\n    AREA= '3',\n    RENKO= '4',\n    LINE_BREAK= '7',\n    KAGI= '5',\n    POINT_AND_FIGURE= '6'\n}\n\nexport enum IntervalTypes {\n    D= 'D',\n    W= 'W'\n};\n  \nexport enum RangeTypes {\n    YTD= 'ytd',\n    ALL= 'all'\n};\n\nexport enum Themes {\n    LIGHT= 'Light',\n    DARK= 'Dark'\n};\n\n\n\nexport const SCRIPT_ID = 'tradingview-widget-script';\nexport const CONTAINER_ID = `tradingview-widget-${Math.random()}`;\n\nexport interface ITradingViewWidget {\n    allow_symbol_change?: boolean;\n    autosize?: boolean;\n    calendar?: boolean;\n    details?: boolean;\n    enable_publishing?: boolean;\n    height?: number;\n    hideideas?: boolean;\n    hide_legend?: boolean;\n    hide_side_toolbar?: boolean;\n    hide_top_toolbar?: boolean;\n    hotlist?: boolean;\n    interval?: \n        '1' |\n        '3' |\n        '5' |\n        '15' |\n        '30' |\n        '60' |\n        '120' |\n        '180' |\n        IntervalTypes.D |\n        IntervalTypes.W;\n    locale?: string;\n    news?: string[];\n    no_referral_id?: boolean;\n    popup_height?: number | string;\n    popup_width?: number | string;\n    referral_id?: string;\n    range?: \n        '1d' |\n        '5d' |\n        '1m' |\n        '3m' |\n        '6m' |\n        RangeTypes.YTD |\n        '12m' |\n        '60m' |\n        RangeTypes.ALL;\n    save_image?: boolean;\n    show_popup_button?: boolean;\n    studies?: string[];\n    style?:  BarStyles.BARS |\n        BarStyles.CANDLES |\n        BarStyles.HOLLOW_CANDLES |\n        BarStyles.HEIKIN_ASHI |\n        BarStyles.LINE |\n        BarStyles.AREA |\n        BarStyles.RENKO |\n        BarStyles.LINE_BREAK |\n        BarStyles.KAGI |\n        BarStyles.POINT_AND_FIGURE;\n    symbol?: string;\n    theme?: Themes.LIGHT | Themes.DARK;\n    timezone?: string;\n    toolbar_bg?: string;\n    watchlist?: string[];\n    widgetType?: string;\n    width?: number;\n    withdateranges?: boolean;\n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { BarStyles, CONTAINER_ID, IntervalTypes, ITradingViewWidget, SCRIPT_ID, Themes } from './tradingview-widget.model';\n\ndeclare const TradingView: any;\n\n@Component({\n  selector: 'tradingview-widget',\n  template: `\n    <section [id]=\"containerId\"> </section>\n  `,\n  styles: []\n})\nexport class TradingviewWidgetComponent implements OnInit {\n\n  private _widgetConfig: ITradingViewWidget = {};\n  private _defaultConfig: ITradingViewWidget = {\n    symbol: 'NASDAQ:AAPL',\n    allow_symbol_change: true,\n    autosize: false,\n    enable_publishing: false,\n    height: 610,\n    hideideas: true,\n    hide_legend: false,\n    hide_side_toolbar: true,\n    hide_top_toolbar: false,\n    interval: IntervalTypes.D,\n    locale: 'en',\n    save_image: true,\n    show_popup_button: false,\n    style: BarStyles.CANDLES,\n    theme: Themes.LIGHT,\n    timezone: 'Etc/UTC',\n    toolbar_bg: '#F1F3F6',\n    widgetType: 'widget',\n    width: 980,\n    withdateranges: false\n  };\n\n  style: {} = {};\n  containerId = CONTAINER_ID;\n\n  @Input('widgetConfig') set widgetConfig (value: ITradingViewWidget) {\n      this._widgetConfig = value;\n      this.cleanWidget();\n      this.initWidget();\n   }\n\n   get widgetConfig (): ITradingViewWidget {\n    return this._widgetConfig || this._defaultConfig;\n  }\n\n  constructor() { }\n\n  ngOnInit(): void {\n    this.appendScript(this.initWidget.bind(this));\n  }\n\n  initWidget () {\n    /* global TradingView */\n    if (typeof TradingView === 'undefined' || !this.getContainer()) return;\n    \n    const { widgetType, ...widgetConfig } = this.widgetConfig;\n    const config = { ...widgetConfig, container_id: this.containerId };\n\n    if (config.autosize) {\n      delete config.width;\n      delete config.height;\n    }\n\n\n    if (config.popup_width && typeof config.popup_width === 'number') {\n      config.popup_width = config.popup_width.toString();\n    }\n\n    if (config.popup_height && typeof config.popup_height === 'number') {\n      config.popup_height = config.popup_height.toString();\n    }\n\n    if(config.autosize) {\n      this.style = {\n        width: '100%',\n        height: '100%'\n      };\n    }\n    /* global TradingView */\n    new TradingView[widgetType!](config);\n  };\n\n  appendScript (onload: any) {\n    if (!this.canUseDOM()) {\n      onload();\n      return;\n    }\n\n    if (this.scriptExists()) {\n      /* global TradingView */\n      if (typeof TradingView === 'undefined') {\n        this.updateOnloadListener(onload);\n        return;\n      }\n      onload();\n      return;\n    }\n    const script = document.createElement('script');\n    script.id = SCRIPT_ID;\n    script.type = 'text/javascript';\n    script.async = true;\n    script.src = 'https://s3.tradingview.com/tv.js';\n    script.onload = onload;\n    document.getElementsByTagName('head')[0].appendChild(script);\n  };\n  \n  canUseDOM () {\n    return typeof window !== 'undefined' &&\n    window.document &&\n    window.document.createElement\n  }\n\n  scriptExists () {\n    return this.getScriptElement() !== null;\n  }\n\n  updateOnloadListener (onload: any) {\n    const script = this.getScriptElement();\n    const oldOnload: any = script!.onload!.bind(script!);\n    return script!.onload = () => {\n      oldOnload();\n      onload();\n    };\n  };\n\n  getScriptElement () {\n    return document.getElementById(SCRIPT_ID);\n  }\n\n  cleanWidget () {\n    if (!this.canUseDOM()) return;\n    const container = this.getContainer();\n    if(container) {\n      container.innerHTML = '';\n    }\n  };\n\n  getContainer () {\n    return document.getElementById(this.containerId);\n  }\n\n    \n\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { TradingviewWidgetComponent } from './tradingview-widget.component';\n\n\n\n@NgModule({\n  declarations: [TradingviewWidgetComponent],\n  imports: [\n    CommonModule\n  ],\n  exports: [TradingviewWidgetComponent],\n  providers: []\n})\nexport class TradingviewWidgetModule {}\n","/*\n * Public API Surface of tradingview-widget\n */\n\nexport * from './lib/tradingview-widget.service';\nexport * from './lib/tradingview-widget.component';\nexport * from './lib/tradingview-widget.module';\nexport * from './lib/tradingview-widget.model';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}